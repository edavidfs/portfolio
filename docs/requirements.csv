id,tipo,estado,prioridad,titulo,descripcion,racional,verificacion,criterios,trazabilidad
CTX-001,Contexto,Pendiente,Media,Métricas mínimas,"Rentabilidad acumulada/periodo vía TWR, volatilidad anualizada, drawdown máximo, Sharpe/Sortino, PnL realizado/no realizado y dividendos acumulados; rendimiento por activo/clase.",Objetivo general de métricas (A-TR).,N/A,N/A,Contexto; alimenta requisitos de métricas UI/TR.
CTX-002,Contexto,Pendiente,Media,Datos necesarios,"Series diarias de valor, operaciones, dividendos, benchmark opcional, tasa libre y CSV IB como entrada principal.",Definición de insumos requeridos.,N/A,N/A,Contexto para ingestión y cálculo.
CTX-003,Contexto,Pendiente,Media,Entradas y supuestos de cálculo,"Timezone unificado, fees/retenciones en cashflow, dividendos reinvertidos en cash, benchmarks alineados en fechas hábiles sin forward-fill de cashflows.",Supuestos base para cálculos consistentes.,N/A,N/A,Contexto de modelado.
CTX-004,Contexto,Pendiente,Media,API/servicios esperados,"Endpoints para series de valor/TWR/drawdown/benchmark, KPIs agregados, por activo/clase, con parámetros de rango/benchmark/tasa libre/moneda.",Alcance esperado de servicios.,N/A,N/A,Contexto para API.
REQ-UI-0001,Funcional,Pendiente,Alta,KPIs de desempeño y riesgo,"La UI debe mostrar en el dashboard tarjetas con valor de cartera, TWR del rango activo, volatilidad anualizada, drawdown máximo y actual, Sharpe, Sortino (tasa libre configurable), PnL realizado/no realizado y dividendos del periodo.","Visión unificada de desempeño, riesgo y flujos (A-PO, A-TR, ECSS).",T (prueba manual) + A (comparación contra backend).,1) Al menos 8 KPIs visibles simultáneamente; 2) Cambiar tasa libre actualiza Sharpe/Sortino sin recarga; 3) Valores coinciden con backend para dataset de prueba.,Padre: objetivo dashboard A-PO; Relación: consume REQ-TR-0001; Hijos: casos de prueba KPIs.
REQ-UI-0002,Funcional,Pendiente,Alta,Rangos rápidos consistentes,"La UI debe ofrecer rangos rápidos (mes actual, YTD, último año completo, desde inicio) y aplicar el rango a KPIs, gráficos y tablas del dashboard de forma consistente.","Asegurar coherencia temporal en la experiencia de análisis (A-PO, ECSS).",T (prueba manual) + I (inspección de estados).,"1) Cambiar rango actualiza KPIs, gráfico y tablas en <1 s perceptible; 2) No se muestran valores de rangos anteriores tras el cambio.",Padre: dashboard; Depende de REQ-UI-0001 y REQ-TR-0001.
REQ-UI-0003,Funcional,Pendiente,Alta,Gráfico cartera vs benchmark con drawdown,"La UI debe mostrar un gráfico con curva de valor de cartera y benchmark, sombreando drawdowns y permitiendo seleccionar sub-rangos.","Comparación relativa y visualización de pérdidas máximas (A-TR, ECSS).",I (inspección) + T (interacción en UI).,1) Se visualizan ambas curvas alineadas; 2) Sombreado cuando cartera está bajo máximo previo; 3) Selección de rango ajusta KPIs asociados.,Consume REQ-TR-0001; hijo: componente gráfico.
REQ-UI-0004,Funcional,Pendiente,Alta,Tabla por activo con coherencia de rango,"Tabla por activo con ticker, nombre, clase, unidades, precio, valor, PnL absoluto/%, peso y fecha de actualización, filtrada al rango activo.","Trazabilidad por activo y conciliación con agregados (A-UI, ECSS).",T (prueba manual) + A (sumas vs KPIs).,1) Totales valor/PnL suman al agregado; 2) Pesos suman ~100% ±0.5%; 3) Orden y filtros según rango.,Depende de REQ-UI-0002; hijos: pruebas de tabla.
REQ-UI-0005,Funcional,Pendiente,Media,Resumen por vehículo,"Resumen por vehículo (acciones, ETFs, bonos, opciones, efectivo) con peso, PnL y rentabilidad del periodo.","Entender contribución por instrumento (A-PO, A-TR).",T (prueba manual con dataset etiquetado).,"1) Cada vehículo muestra peso, PnL, retorno; 2) Pesos ~100% ±0.5%; 3) Totales concuerdan con KPIs.",Hijo de REQ-UI-0004; depende de clasificación de activos.
REQ-UI-0006,Funcional,Pendiente,Media,Totales de movimientos del periodo,"Totales y recuentos de compras, ventas y dividendos del periodo activo junto a KPIs.","Validar coherencia de flujos vs desempeño (A-PO, A-TR).",T (prueba manual) + A (reconciliación).,1) Totales por tipo coinciden con movimientos del rango; 2) Variar rango actualiza totales.,Relación con importadores (BK) y dashboard.
REQ-UI-0007,Funcional,Pendiente,Media,Control de benchmark y tasa libre en UI,Permitir seleccionar benchmark y tasa libre desde dashboard y reflejar cambios sin recargar vista.,Exploración comparativa fluida (A-TR).,T (prueba interactiva).,1) Cambio de benchmark actualiza gráfico/KPIs <1s; 2) Cambio de tasa libre recalcula Sharpe/Sortino.,Depende de REQ-TR-0001 y servicio de precios (BK).
REQ-UI-0008,No funcional,Pendiente,Alta,Gestión de estados y mensajes,"Mostrar estados de loading, vacío con CTA, error con reintento y alerta por datos desactualizados.","Usabilidad y resiliencia (A-UI, ECSS).",I (inspección) + T (forzar estados en dev).,1) Cada estado tiene mensaje/acción clara; 2) Alertas según umbral configurable.,Aplica a dashboard y vistas; relación con health checks (BK).
REQ-UI-0009,Funcional,Pendiente,Alta,Gráfica superior del portfolio,Gráfica con evolución del valor del portafolio y toggles para transferencias y % de beneficio/pérdida.,"Visión de evolución y relación con flujos (A-PO, A-TR).",I (inspección) + T (interacción).,1) Gráfica alineada por fecha; 2) Control para activar transferencias y %; 3) Ejes/leyendas se actualizan al togglear.,Relación con REQ-UI-0003 y REQ-TR-0001; depende de REQ-BK-0001.
REQ-UI-0010,Funcional,Pendiente,Media,Selector de intervalo bajo la gráfica,Selector de intervalo (rango libre y rápidos) que actualiza gráfica y KPIs.,"Control explícito del rango (A-UI, A-PO).",T (prueba manual cambiando intervalos).,1) Cambiar intervalo actualiza en <1s; 2) Rangos rápidos coinciden con REQ-UI-0002; 3) Selector refleja rango activo.,Depende de REQ-UI-0002 y REQ-UI-0003.
REQ-UI-0011,Funcional,Pendiente,Alta,Cajas métricas de flujos y PnL,"Mostrar beneficio, beneficio %, transferencias netas externas, dividendos, PnL de opciones e intereses pagados en el rango activo.","Exponer flujos/resultados clave (A-PO, A-TR).",T (prueba manual) + A (reconciliación).,1) Métricas se recalculan al cambiar rango; 2) Beneficio % deriva de beneficio vs base aportada; 3) Sumas de transferencias/dividendos/intereses coinciden con registros; 4) PnL de opciones se muestra aunque no se valoren posiciones.,"Relación con importadores (BK), series de cashflows (TR) y REQ-UI-0006."
REQ-UI-0012,Funcional,Pendiente,Alta,Aportes/retiros netos en moneda base,Mostrar aportes/retiros netos excluyendo movimientos internos de FX en moneda base configurada.,"Medir capital realmente aportado/retirado (A-PO, A-TR).",A (reconciliación de cashflows) + T (cambiando base).,1) Movimientos internos no alteran total; 2) Total coincide con transferencias externas; 3) Cambio de base reexpresa cifra.,Depende de REQ-BK-0001/0002; se muestra en REQ-UI-0009/0011.
REQ-UI-0013,Funcional,Pendiente,Media,Configuración de moneda base en UI,Seleccionar moneda base en Configuración y aplicarla a dashboard/KPIs sin recarga.,"Necesario para convertir valores y aportes a una moneda única (A-AR, A-TR).",T (prueba manual) + I (inspección de estado aplicado).,1) Cambiar base reexpresa cifras; 2) Preferencia persiste entre sesiones; 3) Textos muestran base vigente.,Depende de REQ-BK-0002; relación con Configuración UI.
REQ-UI-0014,Funcional,Pendiente,Media,Página de Configuración,Página de Configuración con selección de moneda base y vista de valor actual aplicada a dashboard/KPIs.,"Punto único para preferencias (A-PO, A-AR).",T (prueba manual) + I (persistencia en sesión).,1) Guardar base actualiza estado global; 2) Tras recargar se conserva; 3) Textos muestran base vigente.,Se apoya en REQ-BK-0003; relacionado con REQ-UI-0013.
REQ-UI-0015,Funcional,Pendiente,Alta,Tarjeta de transferencias netas,Tarjeta en dashboard con balance total de aportes/retiros externos en moneda base usando API de net transfers.,"Visibilidad clara del capital aportado/retirado (A-PO, A-TR).",T (prueba manual con CSV IB) + A (comparación con /cash/net-transfers).,1) Solo transferencias externas; 2) Valor = aportado - retirado; 3) Cambio de base reexpresa; 4) Se actualiza al importar CSV.,Depende de REQ-BK-0001/0003/0004.
REQ-UI-0016,Funcional,Pendiente,Alta,Tarjeta de valor de portafolio actual,"Mostrar valor total del portafolio en moneda base, sumando activos y efectivo en todas las divisas con FX vigente.","Referencia rápida del valor consolidado multimoneda (A-TR, A-UI).",A (cálculo vs backend) + T (posiciones/cash en varias divisas).,1) Incluye activos + efectivo; 2) Convierte otras divisas a base; 3) Se actualiza al importar/actualizar precios y FX; 4) Se muestra en base activa.,Depende de REQ-TR-0003 y REQ-BK-0005.
REQ-UI-0017,Funcional,Pendiente,Alta,Selector de intervalo y agrupación inferior,"Selector de intervalo (diario, semanal, mensual, trimestral, anual) que agrupa y re-renderiza series de valor/aportes/% PnL sin recargar.","Mejorar legibilidad y coherencia visual (A-UI, A-DB).",T (prueba manual) + A (comparación con backend agrupado).,1) Intervalo activo indicado; 2) Puntos reflejan agrupación; 3) Leyenda “Datos agrupados: <intervalo>”; 4) No se pierden rango ni toggles.,Depende de REQ-BK-0006; complementa REQ-UI-0009/0010.
REQ-UI-0018,Funcional,Pendiente,Alta,Etiqueta de moneda en la gráfica y valor en base,La serie de Valor del Portafolio debe mostrar la moneda base activa y reflejar evolución en esa base tras importaciones o cambios de moneda.,"Claridad de unidad y consistencia multimoneda (A-UI, A-DB).",I (inspección UI) + T (cambiar base e importar datos).,"1) Título incluye moneda base; 2) Cambio de base/importación reexpresa curva; 3) No mezcla de divisas en eje; 4) Si falta FX, la UI avisa y mantiene última serie válida.",Depende de REQ-BK-0007 y REQ-BK-0005; complementa REQ-UI-0016/0017.
REQ-TR-0001,Integración,Pendiente,Alta,Alineación de series y KPIs,"Series y KPIs deben alinearse en fechas, aplicar tasa libre indicada y sincronizar benchmark sin rellenar cashflows con forward-fill.","Comparabilidad de métricas de riesgo y retorno (A-TR, ECSS).",A (comparación de series) + T (pruebas backend/UI).,1) Fechas de cartera y benchmark alineadas sin huecos de cashflows; 2) Cambio de tasa libre se refleja en KPIs; 3) UI muestra valores procesados por backend.,Padre de REQ-UI-0001/0002/0003/0007; depende de ingestión y precios (BK).
REQ-TR-0002,Funcional,Pendiente,Alta,Beneficio desglosado por fuente y divisa,"Calcular y mostrar beneficio por primas de opciones, dividendos y PnL de compraventa, separando caja/aportes y pudiendo mostrarse en base y por divisa de origen.","Evitar confundir aportes con beneficio y manejar cuentas multimoneda (A-TR, A-UI).",A (reconciliación de flujos por divisa) + T (dataset multimoneda).,1) Beneficio excluye aportes; 2) Caja/aportes identificados; 3) Total en base y desglose por divisa; 4) Conversión usa moneda base configurada.,Relación con REQ-UI-0001/0015 y REQ-BK-0002.
REQ-TR-0003,Funcional,Pendiente,Alta,Valor diario de portafolio multimoneda,"Calcular serie diaria de valor sumando activos y efectivo en todas las divisas, convirtiéndolos a la moneda base con FX diarios.",Necesario para KPIs y gráficas consistentes en cuentas multimoneda (A-TR).,A (planilla con FX diarios) + T (prueba con dataset multimoneda).,1) Cada día incluye valor de posiciones y cash convertidos a base; 2) FX diarios almacenados en backend; 3) La serie se expone a UI con divisa base.,Depende de REQ-BK-0002/0005; alimenta REQ-UI-0001/0009/0016.
REQ-BK-0001,Funcional,Pendiente,Alta,Aportes/retiros externos netos,Identificar y calcular aportes/retiros externos excluyendo FX internos en CSV IB y exponerlos vía API.,"Base de capital real para beneficio y KPIs de aportes (A-PO, A-TR).",A (análisis de importación) + T (CSV IB con FX y depósitos).,1) FX internos no alteran total; 2) Aportes/retiros coinciden con transferencias externas; 3) Endpoint devuelve total neto por rango/base.,Alimenta REQ-UI-0009/0011/0012/0013/0014; depende de parseo CSV IB y config base.
REQ-BK-0002,Funcional,Pendiente,Alta,Moneda base configurable y conversión,Admitir moneda base configurable y convertir valores/cashflows a esa moneda con FX diarios (sin valorar opciones).,"Comparar valor/beneficio en una sola divisa (A-AR, A-TR).",A (comparación de conversiones) + T (serie FX y valores en otra moneda).,1) Conversión aplica a valor y aportes/retiros; 2) Base configurable y persistente; 3) Opciones excluidas de valoración pero primas convertidas.,Soporta REQ-UI-0009/0012/0013; depende de REQ-BK-0001.
REQ-BK-0003,Funcional,Pendiente,Alta,Config persistente de moneda base y net transfers,Exponer `GET /cash/net-transfers` con aportes/retiros externos por rango/base y almacenar moneda base configurada.,"Cálculo correcto de aportes netos y aplicación de base en UI (A-AR, A-TR).",T (endpoint con CSV IB y cambio de base) + I (inspección en DB).,1) Endpoint devuelve total externos sin FX internos; 2) Resultado en base almacenada o solicitada; 3) Base persistente se puede leer/actualizar; 4) Documentado propósito y parámetros.,Alimenta REQ-UI-0009/0011/0012/0013/0014.
REQ-BK-0004,Funcional,Pendiente,Alta,Normalización y clasificación de transferencias,"Normalizar transfers y clasificar `origen` (externo, fx_interno, operacion) y `tipo` (deposito, retiro, mov_interno), guardando campos obligatorios.",Evitar distorsión de aportes/retiros y permitir cálculos netos correctos (A-TR).,T (CSV IB con depósitos/retiros/FX internos) + I (inspección de filas).,1) Operaciones STK/OPT excluidas de transfers; 2) FX internos marcados; 3) Solo origen=externo suma aportes/retiros; 4) Campos obligatorios presentes.,Soporta REQ-BK-0001 y REQ-UI-0012/0011.
REQ-BK-0005,Funcional,Pendiente,Alta,Tipos de cambio diarios y valoración multimoneda,Almacenar FX diarios por par (incluida base) y convertir valor de activos y efectivo a base al calcular valor y KPIs.,Cálculo correcto en cuentas multimoneda (A-TR).,A (comparación con planilla) + T (posiciones/cash en varias divisas).,1) Guarda y sirve FX diario; 2) Convierte cash y activos con base configurable; 3) Opciones sin valorar pero primas convertidas; 4) Endpoints usan FX.,Soporta REQ-TR-0003 y REQ-UI-0016.
REQ-BK-0006,Funcional,Pendiente,Alta,Endpoint de serie de valor agrupada por intervalo,`GET /portfolio/value/series` acepta interval/base/from/to y devuelve serie de valor y transferencias externas agrupadas en moneda base con PnL%.,"Consistencia de cálculos y multimoneda en backend (A-DB, A-UI).",T (endpoint con dataset multimoneda) + A (reconciliación manual de agregados).,"1) Valida intervalos y 400 si inválido; 2) Usa último precio dentro del período y suma neta de transferencias externas; 3) Convierte a base o 400 si falta FX; 4) Respuesta incluye base_currency, interval, from, to y puntos `date,value_base,transfers_base,pnl_pct`.",Alimenta REQ-UI-0017/0009/0010; extiende REQ-TR-0003; depende de REQ-BK-0005 y REQ-BK-0004.
REQ-BK-0007,Funcional,Pendiente,Alta,Sincronización incremental de FX,"Descargar y persistir pares FX necesarios al importar datos nuevos o cambiar moneda base, solo para períodos faltantes sin duplicar descargas.","Garantizar valoración continua tras importaciones/cambios de base (A-DB, A-UI).",A (inspección de registros FX) + T (importar datos con divisa no base y cambiar base).,1) Importar en divisa distinta descarga FX faltantes; 2) Cambio de base descarga pares requeridos sin repetir; 3) Valor usa FX descargados inmediatamente; 4) Evita descargar rangos completos ya cubiertos.,Complementa REQ-BK-0005; prerequisito de REQ-UI-0018/0016/0017.
REQ-BK-0008,Funcional,Pendiente,Alta,Valor de serie incluye caja sin precios,"/portfolio/value/series debe reflejar valor en base sin precios/trades, usando caja (transferencias externas) como valor cuando no hay posiciones.","Evitar series planas con solo depósitos/retiros (A-DB, A-UI).",T (tests con solo transferencias) + A (revisión de respuesta).,"1) Sin posiciones, value_base = caja acumulada en base; 2) transfers_base refleja neto diario y value_base no queda en cero; 3) Consistente para intervalos; 4) No se consideran internas en valor de caja.",Depende de REQ-BK-0006; soporta REQ-UI-0018/0016.
REQ-BK-0009,Funcional,Pendiente,Alta,Serie continua entre primera y última fecha,"/portfolio/value/series devuelve serie diaria continua entre primera y última fecha, rellenando días sin movimientos con valor previo y transfers_base=0.","Evitar huecos en gráfica; mostrar evolución continua (A-DB, A-UI).",T (días sin movimientos entre transferencias) + A (inspección de serie).,1) Serie incluye todos los días entre primer y último evento para interval=day; 2) Días sin movimientos mantienen value_base previo y transfers_base=0; 3) Conteo coincide con días del rango; 4) No se generan puntos fuera del rango.,Extiende REQ-BK-0006; soporta REQ-UI-0018/0017.
REQ-BK-0010,Funcional,Pendiente,Media,Serie materializada con saldos por divisa,"Materializar en tabla la serie por intervalo con saldos de efectivo por divisa (cash) y en base (cash_base), recalculando tras importaciones, cambios de base o actualización de FX.","Servir endpoint sin coste computacional y facilitar depuración y gráficas de caja por divisa (A-DB, A-UI).",A (inspección de tabla materializada) + T (consultas al endpoint precalculado).,"1) Tabla guarda date, interval, base_currency, value_base, transfers_base, pnl_pct, cash_json, cash_base_json; 2) Se recalcula al importar/cambiar base/actualizar FX; 3) Endpoint lee de la tabla y rellena en caliente si falta rango; 4) cash_json incluye saldos por divisa (internas y externas) y transfers_base solo movimientos externos.",Complementa REQ-BK-0006/0008/0009; soporta REQ-UI-0018/0017.
REQ-BK-0011,Funcional,Pendiente,Alta,Respuesta parcial con sync de datos faltantes,"Si faltan FX o precios en /portfolio/value/series, devolver la serie calculada con los datos disponibles, incluir un aviso de sincronización y detallar pares/tickers/fechas faltantes; disparar en segundo plano la descarga (Yahoo) de esos datos pendientes.","Evitar errores por datos faltantes y permitir al usuario ver progreso mientras se recuperan (A-DB, A-TR).",T (simular faltantes y verificar respuesta + logs de sync lanzada) + A (inspección de flags y payload de faltantes).,"1) /portfolio/value/series no responde 400 por datos faltantes; 2) Incluye campos sync_in_progress=true y listas missing_fx/missing_prices con fecha y par/ticker; 3) Lanza una sola tarea de sync por solicitud con faltantes y se registra; 4) Tras completar la descarga, la serie completa se obtiene sin flags de faltantes.",Relación con REQ-BK-0006/0007 y UI (mensaje de actualización).
REQ-UI-0019,No funcional,Pendiente,Media,Formato de fecha dd/mm/aaaa,"La UI debe mostrar las fechas en formato día/mes/año (p.ej., 10/11/2025) en tablas, gráficos y etiquetas de fecha.",Consistencia visual y alineación con convención local.,I (inspección) + T (revisión de componente de fechas).,"1) Todas las fechas visibles en UI usan dd/mm/aaaa; 2) Rangos/inputs reflejan y aceptan el mismo formato; 3) No se mezclan formatos en tablas, tooltips ni gráficos.",Aplica a todos los componentes con fechas; complementa requisitos de dashboard y métricas.
REQ-UI-0020,Funcional,Pendiente,Alta,Chequeo de salud al iniciar y bloqueo de servicios,"Al abrir la app (web/Tauri) se invoca GET /health y la UI mantiene deshabilitados los servicios/botones que dependen del backend hasta recibir respuesta OK; en error muestra mensaje y opción de reintentar.",Evitar interacción con backend caído y avisar al usuario (A-UI, A-AR).,T (prueba manual en arranque) + I (inspección de estado bloqueado).,"1) GET /health se ejecuta en el arranque antes de llamadas dependientes; 2) Si falla, se bloquean acciones que requieren backend y se muestra alerta con reintento; 3) Al recibir OK, se habilitan sin recargar; 4) Mientras espera, la UI indica estado de comprobación.",Relación con REQ-UI-0008 y endpoint GET /health.
REQ-UI-0021,No funcional,Pendiente,Media,Layout con scroll sólo en contenido,"La topbar, sidebar y bottombar deben permanecer visibles; el scroll se aplica sólo al área central de contenido sin desplazar las barras.",Mejorar usabilidad y acceso constante a navegación/estado.,I (inspección de layout) + T (probar con contenido largo).,"1) Header/side/bottom no se desplazan al hacer scroll; 2) El área central tiene overflow y muestra scroll; 3) El layout no genera scroll global en desktop; 4) Estado e indicadores permanecen a la vista.",Relacionado con REQ-UI-0008 (estados) y navegación UI.
REQ-UI-0022,No funcional,Pendiente,Media,Shell fijo con layout responsive,"Topbar, sidebar y bottombar permanecen fijos; el área de contenido es responsiva al ancho de la ventana y el scroll se limita al contexto central con relleno que evita solapes.",Consistencia visual y accesibilidad continua a navegación/estado.,I (inspección de layout en desktop/móvil) + T (scroll en contenido largo).,"1) Topbar/side/bottom siempre visibles; 2) Contenido ocupa todo el ancho disponible con padding adaptativo; 3) Scroll sólo dentro del área de contenido; 4) Bottombar no se solapa gracias a padding inferior.",Complementa REQ-UI-0021 y la estructura UI actual.
REQ-BK-0012,Funcional,Pendiente,Media,Serie temporal de transferencias sin conversión FX,"Exponer `GET /transfers/series` que agregue transferencias externas e internas por divisa sin convertir FX, devolviendo montos y acumulados por fecha (día/mes).","Visualizar evolución de capital por divisa sin depender de FX (A-DB, A-UI).",T (pytest endpoint con dataset mixto) + I (inspección de payload).,"1) Intervalos válidos: day|month, 400 si inválido; 2) Serie por divisa incluye amount y cumulative por fecha; 3) Incluye transferencias externas e internas, sin trades ni dividendos; 4) No convierte a moneda base.",Soporta vista de Transferencias UI.
REQ-UI-0023,Funcional,Pendiente,Media,Carga de transferencias desde el inicio,"Al abrir la vista de transferencias, la UI solicita la serie completa desde la primera transferencia registrada hasta la fecha actual, sin límite parcial.","Visión completa de aportes/retiros y movimientos internos.",T (prueba manual UI) + I (inspección de llamada al endpoint).,"1) La llamada a /transfers/series cubre desde la primera fecha registrada hasta hoy; 2) Se refleja en la gráfica toda la historia; 3) No se recorta al rango visible; 4) Incluye externas e internas.",Relacionado con REQ-BK-0012.
REQ-BK-0013,Funcional,Pendiente,Media,Opciones almacenadas y expuestas desde backend,"Las operaciones de opciones (OPT) se guardan en la tabla de trades con su raw_json y se exponen vía /trades para que el frontend las consuma sin calcular nada localmente.","Centralizar datos de opciones en backend y evitar estado derivado en frontend.",T (pytest importando OPT y consultando /trades) + I (inspección de payload).,"1) /import/trades acepta filas OPT y las persiste en trades; 2) /trades devuelve asset_class=OPT con raw_json; 3) Frontend consume opciones desde /trades sin lógica propia; 4) No se duplican opciones en memoria local.",Soporta vistas de opciones (dashboard, ticker-detail).
REQ-BK-0014,Funcional,Pendiente,Media,Unificación de operaciones y FX en backend,"Las compras/ventas STK y primas/asignaciones de opciones se almacenan en `trades`; las FX/cash se clasifican en `transfers` (fx_interno) al importar CSV crudos, y el frontend solo consulta /trades y /transfers sin preprocesar.","Eliminar lógica de clasificación en frontend y centralizar importación en backend.",T (pytest importando STK/OPT/FX/asignaciones y consultando /trades y /transfers) + I (inspección de asset_class/raw_json).,"1) /import/trades acepta filas crudas; 2) STK y OPT quedan persistidas en trades con asset_class correcto; 3) FX internas generan dos asientos en transfers (out/in) con origin=fx_interno; 4) Frontend obtiene operaciones y FX desde /trades y /transfers sin lógica propia.",Relacionado con REQ-BK-0013 y flujos UI de cash/opciones.
REQ-BK-0015,Funcional,Pendiente,Media,Formato de CSVs soportado en backend,"El backend acepta CSV crudos con columnas mínimas: transferencias (`TransactionID,CurrencyPrimary,Date/Time,Amount`), operaciones (`TradeID,Ticker,Quantity,PurchasePrice,DateTime,CurrencyPrimary,AssetClass`), dividendos (`ActionID,Code=Po,Ticker,CurrencyPrimary,Date/Time,GrossAmount,Tax`), sin preprocesado en frontend.","Claridad de insumos y responsabilidad de parseo en backend.",T (pytest importando muestras de transferencias, STK/OPT/FX y dividendos) + I (inspección de deduplicación).,"1) /import/trades y /import/dividends aceptan filas crudas según formato descrito; 2) El backend aplica deduplicación por IDs; 3) Las filas inválidas se ignoran sin romper la importación; 4) Se documenta el formato en README/docs.",Relacionado con docs de importación y REQ-BK-0014.
